(function(g,f,b){'use strict';window.shitbot&&window.shitbot.seppuku();var d=window.shitbot={version:"0.3",currentTrack:null,me:null,chats:2,commands:{die:function(a,e,c){b.getUser(c).permission>=b.ROLE.BOUNCER?this.seppuku():this.doChat("YOU CAN'T TELL ME WHAT TO DO @",a.toUpperCase(),"!")},about:function(a){this.doChat("@",a,": This is shitbot v",this.version," filling in the gaps until a better bot comes online.")},status:function(){this.doChat("Not great")},taco:function(a){this.doChat("@",a,
": Do I look like a chef?")},drink:function(a){this.doChat("@",a,": Do I look like a barkeep?")},info:function(){this.doChat("No Dubstep or Skrillex! 8 minutes max each tune. We play DnB like Liquidfunk, Neurofunk, Jungle, Jump up or *Breaks* except Drumstep and Breakcore. Read about the genre we play here: http://en.wikipedia.org/wiki/Drum_and_bass")},rules:function(){this.doChat("The only genres allowed here are DnB and Breakbeat except Drumstep and Breakcore. If a tune/mix is off-genre or involves Skrillex, it will be skipped. If a tune/mix is longer than 8 minutes, it will be skipped at the 8-minute mark. Also, have fun!")},
whymeh:function(){this.doChat("Please reserve Mehs for songs that are a) extremely overplayed b) off genre c) absolutely god awful or d) troll songs. If you simply aren't feeling a song, then please remain neutral.")}},doChat:function(){var a=f(arguments).toArray().join("");b.sendChat(a)},onRoomScoreUpdate:function(a){console.log("on room score update",a);a.positive&&(this.currentTrack=a)},onAdvance:function(a){console.log("on advance",a);this.currentTrack&&(this.doChat("Last track got ",this.currentTrack.positive,
" woots, ",this.currentTrack.negative," mehs and ",this.currentTrack.curates," snatches!"),this.currentTrack=null);this.doChat("Up Next: ",a.dj.username,' with "',a.media.title,'" by ',a.media.author)},onCurate:function(a){var e="this track";1<this.chats&&(e=b.getMedia().title);console.log("on Curate",a,e);this.doChat(a.user.username," snatched ",e,"!")},onChat:function(a){console.log("on chat",a);a.fromID===this.me.id?this.chats=0:this.chats++;if(this.chats&&"message"===a.type){var b=a.message;"."===
b&&this.doChat(".");if(";"===b.substring(0,1)){var c=b.indexOf(" ");-1===c&&(c=void 0);var d=b.substring(1,c);(d=this.commands[d])&&d.call(this,a.from,c?b.substring(c+1):"",a.fromID)}}},onLoad:function(){console.log("on load");this.me=b.getUser();b.on(b.ROOM_SCORE_UPDATE,this.onRoomScoreUpdate,this);b.on(b.CURATE_UPDATE,this.onCurate,this);b.on(b.DJ_ADVANCE,this.onAdvance,this);b.on(b.CHAT,this.onChat,this);this.doChat("Shitbot v",this.version," now online!")},seppuku:function(){console.log("RIP");
b.off(b.ROOM_SCORE_UPDATE,this.onRoomScoreUpdate,this);b.off(b.CURATE_UPDATE,this.onCurate,this);b.off(b.DJ_AVDANCE,this.onAdvance,this);b.off(b.CHAT,this.onChat,this);this.doChat("Shitbot v",this.version," signing off. Bye!")}};f.bindAll(d,"onLoad");g(d.onLoad);return d})(jQuery,_,API);